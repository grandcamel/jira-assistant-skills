[pytest]
# Test discovery paths
testpaths = plugins/jira-assistant-skills/skills tests

# Directories to ignore during test collection
# Note: live_integration is excluded by default; run explicitly with:
#   pytest plugins/jira-assistant-skills/skills/*/tests/live_integration/ -v
norecursedirs =
    .claude
    __pycache__
    .git
    .venv
    venv
    node_modules
    templates
    docker
    references
    assets
    live_integration

# Test file patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Import mode - use importlib to avoid conflicts with multiple tests/ directories
pythonpath = . plugins/jira-assistant-skills/skills/shared/tests/live_integration
addopts = -v --tb=short --import-mode=importlib

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Markers
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    e2e: marks tests as end-to-end tests
    integration: marks tests as integration tests
    live: marks tests requiring live API access
    unit: marks tests as unit tests
    agile: marks tests as agile skill tests
    bulk: marks tests as bulk operations skill tests
    shared: marks tests as shared library tests
    api: marks tests as requiring API access
    smoke: marks smoke tests
    search: marks tests as search skill tests
    time: marks tests as time tracking skill tests
    collaborate: marks tests as collaborate skill tests
    relationships: marks tests as relationships skill tests
    lifecycle: marks tests as lifecycle skill tests
    dev: marks tests as jira-dev skill tests
    ops: marks tests as ops skill tests
    fields: marks tests as fields skill tests
    jsm: marks tests as JSM skill tests
    jsm_requests: marks tests as JSM request management tests
    jsm_customers: marks tests as JSM customer/org management tests
    jsm_approvals: marks tests as JSM approval workflow tests
    jsm_sla: marks tests as JSM SLA management tests
    jsm_queues: marks tests as JSM queue management tests
    jsm_kb: marks tests as JSM knowledge base tests
    jsm_premium: marks tests requiring JSM Premium license
    admin: marks tests as admin skill tests
    asyncio: marks tests as async tests
    worklog: marks tests as worklog tests
    estimate: marks tests as estimate tests
    transition: marks tests as transition tests
    version: marks tests as version tests
    component: marks tests as component tests
    links: marks tests as link tests
    blockers: marks tests as blocker tests
    clone: marks tests as clone tests
    comments: marks tests as comment tests
    notifications: marks tests as notification tests
    attachments: marks tests as attachment tests
    watchers: marks tests as watcher tests
    destructive: marks tests that modify/delete data (deselect with '-m "not destructive"')
    docker_required: marks tests requiring Docker container
    external_jira: marks tests requiring external JIRA instance
    cloud_only: marks tests only for JIRA Cloud
    dc_only: marks tests only for JIRA Data Center
    issue_crud: marks issue create/read/update/delete tests
    epic: marks epic management tests
    subtask: marks subtask tests
    sprint: marks sprint management tests
    board: marks board management tests
    velocity: marks velocity tracking tests
    rank: marks ranking/prioritization tests
    filter: marks filter management tests
    export: marks export tests
    jql: marks JQL query tests
    assignment: marks assignment tests
    resolution: marks resolution tests
    reopen: marks reopen tests
    sla: marks SLA tests
    approval: marks approval workflow tests
    customer: marks customer management tests
    organization: marks organization tests
    asset: marks asset management tests
    queue: marks queue tests
    kb: marks knowledge base tests
    request: marks service request tests
    automation: marks automation rule tests
    permission: marks permission tests
    scheme: marks scheme management tests
    screen: marks screen management tests
    issuetype: marks issue type tests
    workflow: marks workflow tests
    group: marks group management tests
    user: marks user management tests
    project: marks project management tests
    category: marks category tests
    branch: marks branch name tests
    commit: marks commit tests
    pr: marks pull request tests
    cache: marks cache tests
    discovery: marks discovery tests
